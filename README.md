<h1 align="center">Итоговый проект по Java</h1>
<h3 align="center">Вариант 3. Пассажиры Титаника.</h3>
<div>
  <h3>Идеи при решении проекта</h3>
  <p>Не очень хотелось, чтобы этот проект прошёл бесследно, поэтому было принято решение поэкспериментировать. Давно появилась идея автоматизации в сериализаторах и десериалиторах, написать собственный DI-контейнер, настроить все зависимости в проекте через него. Да и вообще - хотя бы раз за курс написать плюс-минус нормальный код :)</p>
  <p>Итак, на написание DI-контейнера времени не осталось, к сожалению, поэтому разделение на абстракции выглядит достаточно бесполезным.</p>
  <p>Было решено сделать:</p>
  <ul>
    <li>парсер cvs-файлов</li>
    <li>конструктор моделей из данных, полученных от парсера</li>
    <li>конструктор sql-запросов</li>
    <li>исполнитель sql-запросов</li>
    <li>парсер результатов sql-запросов для интеграции с конструктором моделей</li>
  <ul>
</div>
<div>
  <h3>Ход решения</h3>
  <ol>
    <li><a href="#1">Написать парсер csv-файла</a></li>
    <li><a href="#2">Написать автоматический строитель моделей из данных парсера</a></li>
    <li><a href="#3">Написать воркер для sqlite</a></li>
    <li><a href="#4">Передать модели воркеру, чтобы он создал таблицы по моделям и заполнил их данными из моделей</a></li>
    <li><a href="#5">Разработать набор sql-запросов для выполнения заданий</a></li>
    <li><a href="#6">Для первого задания построить график</a></li>
    <li><a href="#7">Выполнить запросы для задания 2 и 3</a></li>
    <li><a href="#vivod">Выводы</a></li>
  </ol>
</div>
<div id="1">
  <h4>Написать парсер csv-файла</h4>
  <p>Парсер очень простой и разбивает файл на набор примитивов для упрощения интеграции с конструктором моделей (хотя лучше запаковать данные парсера в отдельную сущность).</p>
</div>
<div id="2">
  <h4>Написать автоматический строитель моделей из данных парсера</h4>
  <p>Самая интересная технология в этом проекте. Вместо того, чтобы самому руками присваивать значения модели, доставая из csv нужные данные, жуть, достаточно попросить конструктор моделей создать набор моделей, передав лишь данные парсера и базовую модель-пример, на основе которой будут заполнены модели отдаваемой коллекции. Все данные автоматически конвентируются в нужный тип поля, указанный в модели, если это возможно.</p>
  <p>Вся магия с моделями осуществлена при помощи Reflection API</p>
</div>
<div id="3">
  <h4>Написать воркер для sqlite</h4>
  <p>Для работы с sqlite я решил использовать наиболее популярный драйвер LDBC. По-моему, писать sql-запросы в коде "руками" - не самое интересное занятие. Куда интереснее заставить какую-нибудь сущность собирать запросы и передавать лишь опции запроса (для этого создана сущность QueryConstructor, он умеет собирать некоторые виды запросов). Текущая реализация QueryConstructor ещё очень сырая и в идеале всё взаимодействие внутри него нужно переделать на функциональные интерфейсы.</p>
  <p>Сам воркер для БД умеет самостоятельно конфигурировать таблицу и добавлять/извлекать модели из таблицы.</p>
</div>
<div id="4">
  <h4>Передать модели воркеру, чтобы он создал таблицы по моделям и заполнил их данными из моделей</h4>
  <p>Воркеру достаточно передать коллекцию моделей и он сам создаст таблицу с нужной семантикой и сам заполнит её данными из моделей.</p>
</div>
<div id="5">
  <h4>Разработать набор sql-запросов для выполнения заданий</h4>
  <p>В первом задании необходимо было построить график цены билетов у пассажиров объеденив их по полу и колонке Embarked. Для начала нужно извлечь из базы нужные данные.</p>
  <p>Для этого создал запрос:</p>
  <img src="https://github.com/HeavyPunk/JavaExamenProject/blob/master/task_1_sql.png">
  <p>Для второго задания нужно найти разницу между максимальным и минимальным ценой билета у женщин от 15 до 30 лет. Соответствующий запрос:</p>
  <img src="https://github.com/HeavyPunk/JavaExamenProject/blob/master/task_2_sql.png">
  <p>В третьем задани нужно найти список билетов, мужчин в возрасте от 45 до 60 и женщин от 20 до 25. Сам запрос выглядит так:</p>
  <img src="https://github.com/HeavyPunk/JavaExamenProject/blob/master/task_3_sql.png">
</div>
<div id="6">
  <h4>Для первого задания построить график</h4>
  <p>В итоге визуализация результатов первого задания выглядит так:</p>
  <p>Слева указаны средние цены билетов для разных групп. Выборка поделена на мужчин и женщин и в каждой подвыборке разделение по остановкам.<p>
  <img src="https://github.com/HeavyPunk/JavaExamenProject/blob/master/task_1_avg.png">
</div>
<div id="7">
  <h4>Выполнить запросы для задания 2 и 3</h4>
  <p>Выполнение запросов дало следующий результат:</p>
  <ul>
    <li>
      <div>
        <p>Результат для второго задания:</p>
        <img src="https://github.com/HeavyPunk/JavaExamenProject/blob/master/task_2.png">
      </div>
    </li>
    <li>
      <div>
        <p>Результат для третьего задания (показана часть выборки, ибо вся совокупность слишком большая):</p>
        <img src="https://github.com/HeavyPunk/JavaExamenProject/blob/master/task_3.png">
      </div>
    </li>
  </ul>
</div>
<div id="vivod">
  <h4>Некоторые выводы по работе</h4>
  <p>На мой взгляд, автосборщик моделей, конструктор sql-запосов и создание подобных удобных в использовании сущностей дало самый полезный опыт. Некоторые из этих сущностей будут вынесены в отдельные библиотеки и дорабатываться уже в формате библиотек, после чего окажутся в репозитории maven.</p>
</div>
